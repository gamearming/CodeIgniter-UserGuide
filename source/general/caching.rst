################
網頁快取
################

CodeIgniter 可以讓您通過快取頁面來達到更好的性能。

儘管 CodeIgniter 已經相當高效了，但是網頁中的動態內容、主機的記憶體
CPU 和資料庫讀取速度等因素直接影響了網頁的載入速度。 依靠網頁快取，
您的網頁可以達到近乎靜態網頁的載入速度，因為程序的輸出結果
已經儲存下來了。

快取是如何工作的？
======================

可以針對到每個獨立的頁面進行快取，並且您可以設定每個頁面快取的更新時間。
當頁面第一次載入時，快取將被寫入到 application/cache 目錄下的文件中去。
之後請求這個頁面時，就可以直接從快取文件中讀取內容並輸出到用戶的瀏覽器。
如果快取過期，會在輸出之前被刪除並重新刷新。

.. note: 基準測試標籤不會被快取，所以在開啟快取的情況下基準測試仍然可以用。

開啟快取
================

將下面的程式碼放到任何一個控制器的成員函數內，您就可以開啟快取了::

	$this->output->cache($n);

其中 ``$n`` 是快取更新的時間（單位分鐘）。

上面的程式碼可以放在成員函數的任何位置，它出現的順序對快取沒有影響，
所以您可以把它放到任何您認為合理的地方。一旦該程式碼被放在成員函數內，
您的頁面就開始被快取了。

.. important:: 由於 CodeIgniter 儲存快取的方式，只有通過 :doc:`view <./views>` 
	輸出的頁面才能快取。

.. important:: 如果您修改了可能影響頁面輸出的設定，您需要手工刪除掉
	您的快取文件。

.. note:: 在寫入快取文件之前，您需要把 *application/cache/* 目錄的權限
	設定為可寫。

刪除快取
===============

如果您不再需要快取某個頁面，您可以刪除掉該頁面上的快取程式碼，
這樣它在過期之後就不會刷新了。

.. note:: 刪除快取程式碼之後並不是立即生效，必須等到快取過期才會生效。

如果您需要手工刪除快取，您可以使用 ``delete_cache()`` 成員函數::

	// Deletes cache for the currently requested URI
	$this->output->delete_cache();

	// Deletes cache for /foo/bar
	$this->output->delete_cache('/foo/bar');